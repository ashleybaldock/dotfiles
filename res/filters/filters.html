<!doctype html>
<html lang="en">
  <head>
    <title>Filters</title>
    <!--{{{-->
    <meta charset="utf-8" http-equiv="Content-type" />
    <meta name="theme-color" content="#000000" />

    <link rel="stylesheet" href="/common.css" />
    <link rel="stylesheet" href="filters.css" />
    <link rel="stylesheet" href="filters-demo.css" />

    <style>
      :root {
        --filter-fillandoutline: url(#filter-fillandoutline);
        --filter-outline: url(#filter-outline);
        --filter-coloroutline: url(#filter-coloroutline);
        --filter-softoutline: url(#filter-softoutline);

        --filter-turbulence1: url(#filter-turbulence1);

        --clipPath-demo-objectBoundingBox: url(#demo-ClipPath-objectBoundingBox);
        --clipPath-demo-userSpaceOnUse: url(#demo-ClipPath-userSpaceOnUse);

        --mask-demo-objectBoundingBox: url(#demo-Mask-objectBoundingBox);
        --mask-demo-userSpaceOnUse: url(#demo-Mask-userSpaceOnUse);
      }
    </style>
  </head>

  <body>
    <aside class="svgdefs">
    <svg xmlns="http://www.w3.org/2000/svg">
      <defs>
        <clipPath
          id="demo-ClipPath-objectBoundingBox"
          clipPathUnits="objectBoundingBox">
          <circle cx=".5" cy=".5" r=".35" />
        </clipPath>
        <clipPath
          id="demo-ClipPath-userSpaceOnUse"
          clipPathUnits="userSpaceOnUse">
          <circle cx="50" cy="50" r="35" />
        </clipPath>

        <mask
          id="demo-Mask-userSpaceOnUse"
          maskUnits="userSpaceOnUse"
          maskContentUnits="userSpaceOnUse"
          x="20%"
          y="20%"
          width="60%"
          height="60%">
          <rect fill="black" x="0" y="0" width="100%" height="100%" />
          <circle fill="white" cx="50" cy="50" r="35" />
        </mask>
        <mask
          id="demo-Mask-objectBoundingBox"
          maskUnits="objectBoundingBox"
          maskContentUnits="objectBoundingBox"
          x="20%"
          y="20%"
          width="60%"
          height="60%">
          <rect fill="black" x="0" y="0" width="100%" height="100%" />
          <circle fill="white" cx="50" cy="50" r="35" />
        </mask>

        <filter id="filter-turbulence1">
          <feTurbulence result="TURBULENCE" baseFrequency="0.08" numOctaves="1" seed="1" />
          <feDisplacementMap in="SourceGraphic" in2="TURBULENCE" scale="9" />
        </filter>

        <filter id="filter-fillandoutline"
          x="-10%" y="-10%" width="120%" height="120%"
          filterUnits="objectBoundingBox" primitiveUnits="objectBoundingBox">
          <feMorphology
            in="SourceAlpha"
            operator="dilate"
            radius="1.6"
            result="DILATED"
          ></feMorphology>

          <feFlood
            flood-opacity="1"
            flood-color="#006cbf"
            result="SOURCE-COLOR"
          ></feFlood>
          <feComposite
            in="SOURCE-COLOR"
            in2="SourceAlpha"
            operator="in"
            result="SOURCE-RECOLOR"
          ></feComposite>

          <feFlood
            flood-opacity="1"
            flood-color="#000000"
            result="OUTLINE-COLOR"
          ></feFlood>
          <feComposite
            in="OUTLINE-COLOR"
            in2="DILATED"
            operator="in"
            result="OUTLINE"
          ></feComposite>

          <feMerge>
            <feMergeNode in="OUTLINE"></feMergeNode>
            <feMergeNode in="SOURCE-RECOLOR"></feMergeNode>
          </feMerge>
        </filter>

        <filter id="filter-coloroutline" 
          x="-10%" y="-10%" width="120%" height="120%"
          primitiveUnits="objectBoundingBox"
          filterUnits="objectBoundingBox">
          <feFlood
            flood-opacity="1"
            flood-color="#006cbf"
            result="SOURCE-COLOR"
          ></feFlood>
          <feComposite
            in="SOURCE-COLOR"
            in2="SourceAlpha"
            operator="out"
            result="SOURCE-RECOLOR"
          ></feComposite>

          <feMorphology
            in="SourceAlpha"
            operator="dilate"
            radius="1"
            result="DILATED"
          ></feMorphology>
          <feComposite
            in="DILATED"
            in2="SourceGraphic"
            operator="out"
            out="OUTLINE-ONLY"
          ></feComposite>
          <feFlood
            flood-opacity="1"
            flood-color="#000000"
            result="OUTLINE-COLOR"
          ></feFlood>
          <feComposite
            in="OUTLINE-COLOR"
            in2="DILATED"
            operator="out"
            result="OUTLINE"
          ></feComposite>

          <feMerge>
            <feMergeNode in="OUTLINE"></feMergeNode>
            <feMergeNode in="OUTLINE-ONLY"></feMergeNode>
          </feMerge>
        </filter>

        <filter id="filter-softoutline"
          x="-10%" y="-10%" width="120%" height="120%"
          primitiveUnits="objectBoundingBox"
          filterUnits="objectBoundingBox">
          <feMorphology
            in="SourceAlpha"
            operator="dilate"
            radius="1"
            result="DILATED"
          ></feMorphology>
          <feComposite
            in="DILATED"
            in2="SourceGraphic"
            operator="out"
            out="OUTLINE-ONLY"
          ></feComposite>
          <feGaussianBlur
            in="OUTLINE-ONLY"
            stdDeviation="0.8"
            out="OUTLINE-ONLY-BLUR"
          ></feGaussianBlur>

          <feFlood
            flood-opacity="1"
            flood-color="#006cbf"
            result="SOURCE-COLOR"
          ></feFlood>
          <feComposite
            in="SOURCE-COLOR"
            in2="SourceAlpha"
            operator="in"
            result="SOURCE-RECOLOR"
          ></feComposite>
          <feComposite
            in="SOURCE-COLOR"
            in2="SourceAlpha"
            operator="out"
            result="SOURCE-RECOLOR-OUT"
          ></feComposite>

          <feFlood
            flood-opacity="1"
            flood-color="#000000"
            result="OUTLINE-COLOR"
          ></feFlood>
          <feComposite
            in="OUTLINE-COLOR"
            in2="DILATED"
            operator="out"
            result="OUTLINE"
          ></feComposite>
          <feMerge>
            <feMergeNode in="OUTLINE-ONLY_"></feMergeNode>
            <feMergeNode in="SOURCE-RECOLOR-OUT_"></feMergeNode>
            <feMergeNode in="OUTLINE-ONLY-BLUR"></feMergeNode>
            <feMergeNode in="OUTLINE-ONLY-BLUR"></feMergeNode>

            <feMergeNode in="SOURCE-RECOLOR"></feMergeNode>
          </feMerge>
        </filter>
      </defs>
    </svg>
    </aside>

    <h2>Filters</h2>

    <section class="demo">
      <h2>Text Outlining</h2>
      <article style="--f: var(--filter-fillandoutline)">
        <h3>Fill and Outline</h3>
      </article>
      <article style="--f: var(--filter-outline)">
        <h3>Outline</h3>
      </article>
      <article style="--f: var(--filter-coloroutline)">
        <h3>Color Outline</h3>
      </article>
      <article style="--f: var(--filter-softoutline)">
        <h3>Soft Outline</h3>
      </article>
    </section>

    <section class="demo">
      <h2>Basic CSS Filters</h2>

      <article style="--f: var(--filter-turbulence1)">
        <h3>Turbulence<h3>
      </article>

      <article style="--f: var(--filter-tinydots)">
        <h3>Tiny dots<h3>
      </article>
    </section>
  </body>
</html>
